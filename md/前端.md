## axios拦截器

拦截请求带有自定义属性的请求，可以作为判断用户是否登录

若没有登录则弹出登录框，否则带上Token发送请求

1. 新建`axios.d.ts`文件并配置

```ts
import { AxiosRequestConfig } from 'axios';

declare module 'axios' {
    interface AxiosRequestConfig {
        requiresAuth?: boolean;
    }
}

```

2. 在`axios_config.js`中配置请求拦截器

```ts
// 请求拦截器
axios.interceptors.request.use(
    (config) => {

        const userStore = useMainStore()
        const userInfo = userStore.userInfo

        // 检查登录状态
        if (config.requiresAuth === true){
            if (!userInfo.id) {
                userStore.handleLogin()
                return Promise.reject(ElMessage.warning("请登录"));
            }
            // 可选：为已登录请求添加 token
            // config.headers.Authorization = `Token ${localStorage.getItem('Token')}`;
        }
        return config;
        }
        ,
    (error) => {
        return Promise.reject(error);
    }
);
```

3. 在需要token验证的请求上添加配置，未添加默认为公共接口	

```ts
axios.get(`xxx/xxx`,{requiresAuth: true})
```

